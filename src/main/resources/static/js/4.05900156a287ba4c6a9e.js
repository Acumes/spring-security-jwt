webpackJsonp([4],{221:function(t,e,a){a(474);var l=a(94)(a(456),a(481),null,null);t.exports=l.exports},251:function(t,e,a){"use strict";a.d(e,"d",function(){return l}),a.d(e,"a",function(){return r}),a.d(e,"e",function(){return o}),a.d(e,"b",function(){return n}),a.d(e,"c",function(){return s});var l=[{value:"1",label:"超级管理员"},{value:"2",label:"管理员"},{value:"3",label:"普通帐户"}],r=[{value:1,label:"成功"},{value:0,label:"失败"}],o=[{value:1,label:"可用"},{value:0,label:"不可用"}],n=[{value:"week",label:"最近一周"},{value:"month",label:"最近三十天"},{value:"year",label:"最近一年"}],s=[{value:"day",label:"天"},{value:"month",label:"月"}]},252:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a(96),r=a.n(l),o=a(95),n=a.n(o),s=a(54),i=a.n(s),c=a(99),u=a(98),p=a(22);e.default={data:function(){return{baseImgPath:c.b}},created:function(){this.adminInfo.id},computed:i()({},a.i(u.b)(["adminInfo"])),methods:i()({},a.i(u.c)(["getAdminData"]),{handleCommand:function(t){var e=this;return n()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:"home"==t?e.$router.push("/manage"):"singout"==t&&(p.a.state.global.isLogin=!1,window.sessionStorage.setItem("isLogin",!1),e.$router.push("login"));case 1:case"end":return a.stop()}},a,e)}))()}})}},253:function(t,e,a){e=t.exports=a(217)(!1),e.push([t.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.header_container{background-color:#eff2f7;height:60px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding-left:20px}.avator{width:36px;height:36px;border-radius:50%;margin-right:37px}.el-dropdown-menu__item{text-align:center}",""])},259:function(t,e,a){var l=a(253);"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);a(218)("62edd49e",l,!0)},260:function(t,e,a){a(259);var l=a(94)(a(252),a(261),null,null);t.exports=l.exports},261:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header_container"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/manage"}}},[t._v("首页")]),t._v(" "),t._l(t.$route.meta,function(e){return a("el-breadcrumb-item",[t._v(t._s(e))])})],2),t._v(" "),a("el-dropdown",{attrs:{"menu-align":"start"},on:{command:t.handleCommand}},[a("img",{staticClass:"avator",attrs:{src:t.baseImgPath+t.adminInfo.avatar}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"home"}},[t._v("首页")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"singout"}},[t._v("退出")])],1)],1)],1)},staticRenderFns:[]}},456:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a(54),r=a.n(l),o=a(96),n=a.n(o),s=a(95),i=a.n(s),c=a(260),u=a.n(c),p=a(97),m=a(251);e.default={name:"log-list",data:function(){return{tableData:[],currentRow:null,currentPage:1,currentSize:20,multipleSelection:[],searchForm:{ip:"",companyId:"",status:"",customerId:"",url:"",functionName:"",startTime:"",endTime:""},logStatus:m.a,total:0,dialogLogDetail:!1,logDetail:{},labelPosition:"right"}},components:{headTop:u.a},activated:function(){this.initData()},deactivated:function(){},mounted:function(){},methods:{initData:function(){var t=this;return i()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{t.getLogs()}catch(t){console.log("获取数据失败",t)}case 1:case"end":return e.stop()}},e,t)}))()},handleSizeChange:function(t){this.currentSize=t,this.getLogs()},handleCurrentChange:function(t){this.currentPage=t,this.getLogs()},handleSelectionChange:function(t){this.multipleSelection=t},getLogs:function(){var t=this;return i()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:""!=t.searchForm.startTime&&(t.searchForm.startTime=t.$getTime(t.searchForm.startTime)),""!=t.searchForm.endTime&&(t.searchForm.endTime=t.$getTime(t.searchForm.endTime)),a=r()({},t.searchForm,{pageSize:t.currentSize,pageNo:t.currentPage}),p.a.getLogList(a).then(function(e){if(t.tableData=[],e.success)t.total=e.total,e.logs&&e.logs.forEach(function(e){t.tableData.push(e)});else;});case 4:case"end":return e.stop()}},e,t)}))()},rowClick:function(t){console.log(t),this.dialogLogDetail=!0,this.logDetail=t},onSearchSubmit:function(){this.getLogs()},clearData:function(){this.searchForm={ip:"",companyId:"",status:"",customerId:"",url:"",functionName:"",startTime:"",endTime:""}},resetSubmit:function(){this.clearData()}}}},467:function(t,e,a){e=t.exports=a(217)(!1),e.push([t.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.table_container{padding:10px 20px 20px}.button_container{padding-left:20px;padding-top:20px}.line-limit-length{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}",""])},474:function(t,e,a){var l=a(467);"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);a(218)("17bab611",l,!0)},481:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fillcontain"},[a("head-top"),t._v(" "),a("div",{staticClass:"button_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:t.searchForm,"label-position":t.labelPosition}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"服务器url"}},[a("el-col",{attrs:{span:19}},[a("el-input",{attrs:{placeholder:"请输入url"},model:{value:t.searchForm.url,callback:function(e){t.$set(t.searchForm,"url",e)},expression:"searchForm.url"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"访问者ip"}},[a("el-col",{attrs:{span:19}},[a("el-input",{attrs:{placeholder:"请输入ip"},model:{value:t.searchForm.ip,callback:function(e){t.$set(t.searchForm,"ip",e)},expression:"searchForm.ip"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"服务器方法"}},[a("el-col",{attrs:{span:19}},[a("el-input",{attrs:{placeholder:"请输入方法"},model:{value:t.searchForm.functionName,callback:function(e){t.$set(t.searchForm,"functionName",e)},expression:"searchForm.functionName"}})],1)],1)],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:6}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSearchSubmit}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:t.resetSubmit}},[t._v("重置")])],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"状态　　"}},[a("el-col",{attrs:{span:19}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择状态"},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},t._l(t.logStatus,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"客户编码"}},[a("el-col",{attrs:{span:19}},[a("el-input",{attrs:{placeholder:"请输入客户编码"},model:{value:t.searchForm.customerId,callback:function(e){t.$set(t.searchForm,"customerId",e)},expression:"searchForm.customerId"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"公司编码　"}},[a("el-col",{attrs:{span:19}},[a("el-input",{attrs:{placeholder:"请输入公司编码"},model:{value:t.searchForm.companyId,callback:function(e){t.$set(t.searchForm,"companyId",e)},expression:"searchForm.companyId"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}})],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"开始时间"}},[a("el-col",{attrs:{span:19}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.searchForm.startTime,callback:function(e){t.$set(t.searchForm,"startTime",e)},expression:"searchForm.startTime"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"结束时间"}},[a("el-col",{attrs:{span:19}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.searchForm.endTime,callback:function(e){t.$set(t.searchForm,"endTime",e)},expression:"searchForm.endTime"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}}),t._v(" "),a("el-col",{attrs:{span:6}})],1)],1)],1),t._v(" "),a("div",{staticClass:"table_container"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:!0,border:"","highlight-current-row":""},on:{"row-click":t.rowClick,"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"65"}}),t._v(" "),a("el-table-column",{attrs:{label:"服务器url",width:"260"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v(t._s(e.row.url))]),t._v(" "),a("div",{staticClass:"name-wrapper line-limit-length",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                            "+t._s(e.row.url)+"\n                        ")])])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"ip",label:"访问者ip",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{property:"functionName",label:"服务器方法"}}),t._v(" "),a("el-table-column",{attrs:{property:"startTime",width:"175",label:"开始时间"}}),t._v(" "),a("el-table-column",{attrs:{property:"endTime",width:"175",label:"结束时间"}}),t._v(" "),a("el-table-column",{attrs:{property:"customerId",width:"100",label:"客户编码"}}),t._v(" "),a("el-table-column",{attrs:{property:"companyId",width:"100",label:"公司编码"}}),t._v(" "),a("el-table-column",{attrs:{width:"80",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(1==e.row.status?"成功":"失败")+"\n                ")]}}])})],1),t._v(" "),a("div",{staticClass:"Pagination",staticStyle:{"text-align":"center","margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.currentSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"日志详情",visible:t.dialogLogDetail},on:{"update:visible":function(e){t.dialogLogDetail=e}}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("span",[t._v("访问者ip:"+t._s(t.logDetail.ip))])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("span",[t._v("状态:"+t._s("1"==t.logDetail.status?"成功":"失败"))])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("span",[t._v("公司编码:"+t._s(t.logDetail.companyId))])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:8}},[a("span",[t._v("开始时间:"+t._s(t.logDetail.startTime))])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("span",[t._v("结束时间:"+t._s(t.logDetail.endTime))])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("span",[t._v("客户编码:"+t._s(t.logDetail.customerId))])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("span",[t._v("服务器url:"+t._s(t.logDetail.url))])]),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("span",[t._v("服务器方法:"+t._s(t.logDetail.functionName))])]),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("span",[t._v("请求数据:\n                    "),a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},placeholder:"请输入内容"},model:{value:t.logDetail.reqJson,callback:function(e){t.$set(t.logDetail,"reqJson",e)},expression:"logDetail.reqJson"}})],1)]),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("span",[t._v("响应数据:"),a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},placeholder:"请输入内容"},model:{value:t.logDetail.resJson,callback:function(e){t.$set(t.logDetail,"resJson",e)},expression:"logDetail.resJson"}})],1)])],1)],1)},staticRenderFns:[]}}});