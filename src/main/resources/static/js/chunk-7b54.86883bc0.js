(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7b54"],{"+DNT":function(t,e,n){"use strict";n.r(e);var i=n("ny1n"),r={name:"roles",data:function(){return{list:null,listLoading:!0,form:{name:"",remarks:"",permission:"",icon:"",isShow:!1,id:"",parentId:""},parentId:"",parentName:"",isAdd:!1,isDisabled:!0,rules:{name:[{required:!0,message:this.$t("role.validation.requiredName"),trigger:"blur"}],remarks:[{required:!0,message:this.$t("role.validation.requiredRemarks"),trigger:"blur"}]}}},created:function(){document.title=this.$t("route."+this.$route.meta.title),this.getTree()},methods:{getTree:function(){var t=this,e=this;this.listLoading=!0,Object(i.k)().then(function(n){t.list=n.data,e.recursion(t.list)}).catch(function(t){})},recursion:function(t){var e=this;t.forEach(function(t){t.label=t.name,t.children&&e.recursion(t.children)})},add:function(){this.isDisabled=!1,this.isAdd=!0,this.resetData()},edit:function(){""!==this.parentId?(this.isAdd=!1,this.isDisabled=!1):this.$alert("请选择要修改的菜单","提示",{confirmButtonText:"确定"})},menuInfo:function(t){this.isAdd=!1,this.parentId=t.id,this.parentName=t.name,this.form=this.$cloneObj(t),"1"===t.isShow?this.form.isShow=!0:this.form.isShow=!1},onSubmit:function(){var t=this;console.log(this.parentId),this.isAdd?(this.form.parentId=this.parentId,Object(i.a)(this.form).then(function(e){t.form.id=e.data,t.menuInfo(t.form),t.isDisabled=!0,t.getTree()}).catch(function(t){console.log(t)})):Object(i.p)(this.form).then(function(e){t.form.isShow?t.form.isShow="1":t.form.isShow="0",t.menuInfo(t.form),t.isDisabled=!0,t.getTree()}).catch(function(t){console.log(t)})},deleteMenu:function(){var t=this;""!==this.parentId?this.$confirm("确定要删除（"+this.parentName+"）菜单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.j)(t.parentId).then(function(e){e.data>0?t.$confirm("（"+t.parentName+"）还有子菜单，该删除操作会级联删除子菜单，确定删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.delMenuMethod()}).catch(function(e){t.$message({type:"info",message:"已取消删除"})}):t.delMenuMethod()}).catch(function(t){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})}):this.$alert("请选择要删除的菜单","提示",{confirmButtonText:"确定"})},expandedIsShow:function(t){t.expanded=!t.expanded},resetData:function(){this.form={name:"",remarks:"",permission:"",icon:"",isShow:!1,id:"",parentId:""}},delMenuMethod:function(){var t=this;Object(i.g)(this.parentId).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.isDisabled=!0,t.isAdd=!1,t.resetData(),t.parentId="",t.parentName="",t.getTree()}).catch(function(t){})}}},o=(n("ppU3"),n("ZrdR")),s=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",[n("p",{staticClass:"text-content"},[t.$store.getters.permissions.includes("sys:menu:add")?n("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:t.add}},[t._v("新增")]):t._e(),t._v(" "),t.$store.getters.permissions.includes("sys:menu:edit")?n("el-button",{attrs:{type:"warning",icon:"el-icon-edit"},on:{click:t.edit}},[t._v("编辑")]):t._e(),t._v(" "),t.$store.getters.permissions.includes("sys:menu:delete")?n("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:t.deleteMenu}},[t._v("删除")]):t._e()],1)]),t._v(" "),n("el-row",[n("el-col",{attrs:{span:8}},[n("div",[n("el-row",[n("el-tree",{attrs:{data:t.list,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,r=e.data;return n("span",{staticClass:"custom-tree-node"},[n("span",{on:{click:function(e){t.menuInfo(r)},dblclick:function(e){t.expandedIsShow(i,r)}}},[n("i",{class:i.icon}),n("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(i.label))])])])}}])})],1)],1)]),t._v(" "),n("el-col",{attrs:{span:16}},[n("div",[n("el-row",[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[t.isAdd?n("el-form-item",{attrs:{label:"父级节点"}},[n("span",[t._v(t._s(t.parentName))])]):t._e(),t._v(" "),n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{staticStyle:{width:"60%"},attrs:{disabled:t.isDisabled},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"是否显示"}},[n("el-switch",{attrs:{disabled:t.isDisabled},model:{value:t.form.isShow,callback:function(e){t.$set(t.form,"isShow",e)},expression:"form.isShow"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"icon"}},[n("el-input",{staticStyle:{width:"60%"},attrs:{disabled:t.isDisabled},model:{value:t.form.icon,callback:function(e){t.$set(t.form,"icon",e)},expression:"form.icon"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"权限"}},[n("el-input",{staticStyle:{width:"60%"},attrs:{disabled:t.isDisabled},model:{value:t.form.permission,callback:function(e){t.$set(t.form,"permission",e)},expression:"form.permission"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"说明"}},[n("el-input",{staticStyle:{width:"60%"},attrs:{type:"textarea",disabled:t.isDisabled},model:{value:t.form.remarks,callback:function(e){t.$set(t.form,"remarks",e)},expression:"form.remarks"}})],1),t._v(" "),t.isDisabled?t._e():n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),t._v(" "),n("el-button",[t._v("取消")])],1)],1)],1)],1)])],1)],1)},[],!1,null,"29828340",null);s.options.__file="index.vue";e.default=s.exports},"1lVa":function(t,e,n){},ny1n:function(t,e,n){"use strict";n.d(e,"o",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"r",function(){return s}),n.d(e,"f",function(){return a}),n.d(e,"i",function(){return u}),n.d(e,"m",function(){return c}),n.d(e,"b",function(){return d}),n.d(e,"q",function(){return l}),n.d(e,"h",function(){return f}),n.d(e,"k",function(){return m}),n.d(e,"a",function(){return h}),n.d(e,"p",function(){return p}),n.d(e,"g",function(){return b}),n.d(e,"j",function(){return v}),n.d(e,"l",function(){return g}),n.d(e,"e",function(){return w}),n.d(e,"n",function(){return _}),n.d(e,"c",function(){return j});var i=n("t3Un");function r(t){return Object(i.a)({url:"/users/getUsers",method:"post",data:t})}function o(t){return Object(i.a)({url:"/users/add",method:"post",data:t})}function s(t){return Object(i.a)({url:"/users",method:"put",data:t})}function a(t){return Object(i.a)({url:"/users/checkUser",method:"post",data:t})}function u(t){return Object(i.a)({url:"/users/"+t,method:"delete"})}function c(t){return Object(i.a)({url:"/roles/getRoles",method:"post",data:t})}function d(t){return Object(i.a)({url:"/roles/",method:"post",data:t})}function l(t){return Object(i.a)({url:"/roles/",method:"put",data:t})}function f(t){return Object(i.a)({url:"/roles/"+t,method:"delete"})}function m(t){return Object(i.a)({url:"/menu/tree",method:"post",data:t})}function h(t){return Object(i.a)({url:"/menu",method:"post",data:t})}function p(t){return Object(i.a)({url:"/menu",method:"put",data:t})}function b(t){return Object(i.a)({url:"/menu/"+t,method:"delete"})}function v(t){return Object(i.a)({url:"/menu/isChild/"+t,method:"get"})}function g(t){return Object(i.a)({url:"/roles/menu/"+t,method:"get"})}function w(t,e){return Object(i.a)({url:"/roles/authorization/"+t,method:"post",data:e})}function _(t){return Object(i.a)({url:"/schedule/getSchedules",method:"post",data:t})}function j(t){return Object(i.a)({url:"/schedule/",method:"post",data:t})}},ppU3:function(t,e,n){"use strict";var i=n("1lVa");n.n(i).a}}]);